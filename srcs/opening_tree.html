<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Tree Example</title>

    <style>
	
	.node {
		cursor: pointer;
	}

	.node circle {
	  fill: #fff;
	  stroke: steelblue;
	  stroke-width: 3px;
	}

	.node text {
	  font: 12px sans-serif;
	}

	.link {
	  fill: none;
	  stroke: #ccc;
	  stroke-width: 2px;
	}
	
    </style>

  </head>

  <body>

<!-- load the d3.js library -->	
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
	
<script>

var treeData = [
  {
    "name": "start 0/0",
    "parent": null,
    "ngames": 0,
    "ratio": null,
    "children": [
        {
            "name": "e4 32.5/52",
            "parent": "start 0/0",
            "ngames": 52,
            "ratio": 0.625,
            "children": [
                {
                    "name": "d5 1/3",
                    "parent": "e4 32.5/52",
                    "ngames": 3,
                    "ratio": 0.3333333333333333,
                    "children": [
                        {
                            "name": "exd5 1/3",
                            "parent": "d5 1/3",
                            "ngames": 3,
                            "ratio": 0.3333333333333333,
                            "children": [
                                {
                                    "name": "Qxd5 0/1",
                                    "parent": "exd5 1/3",
                                    "ngames": 1,
                                    "ratio": 0.0,
                                    "url": "https://lichess.org/ADvBQWIx"
                                },
                                {
                                    "name": "Nf6 1/2",
                                    "parent": "exd5 1/3",
                                    "ngames": 2,
                                    "ratio": 0.5,
                                    "children": [
                                        {
                                            "name": "c4 1/2",
                                            "parent": "Nf6 1/2",
                                            "ngames": 2,
                                            "ratio": 0.5,
                                            "children": [
                                                {
                                                    "name": "e6 1/1",
                                                    "parent": "c4 1/2",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/JBwwiXBC"
                                                },
                                                {
                                                    "name": "c6 0/1",
                                                    "parent": "c4 1/2",
                                                    "ngames": 1,
                                                    "ratio": 0.0,
                                                    "url": "https://lichess.org/uJrzCCKr"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Nc6 0/1",
                    "parent": "e4 32.5/52",
                    "ngames": 1,
                    "ratio": 0.0,
                    "url": "https://lichess.org/Ft5kjHWW"
                },
                {
                    "name": "c6 2/3",
                    "parent": "e4 32.5/52",
                    "ngames": 3,
                    "ratio": 0.6666666666666666,
                    "children": [
                        {
                            "name": "d4 2/3",
                            "parent": "c6 2/3",
                            "ngames": 3,
                            "ratio": 0.6666666666666666,
                            "children": [
                                {
                                    "name": "d5 2/3",
                                    "parent": "d4 2/3",
                                    "ngames": 3,
                                    "ratio": 0.6666666666666666,
                                    "children": [
                                        {
                                            "name": "e5 2/3",
                                            "parent": "d5 2/3",
                                            "ngames": 3,
                                            "ratio": 0.6666666666666666,
                                            "children": [
                                                {
                                                    "name": "Bf5 2/3",
                                                    "parent": "e5 2/3",
                                                    "ngames": 3,
                                                    "ratio": 0.6666666666666666,
                                                    "children": [
                                                        {
                                                            "name": "Nf3 2/3",
                                                            "parent": "Bf5 2/3",
                                                            "ngames": 3,
                                                            "ratio": 0.6666666666666666,
                                                            "children": [
                                                                {
                                                                    "name": "e6 2/3",
                                                                    "parent": "Nf3 2/3",
                                                                    "ngames": 3,
                                                                    "ratio": 0.6666666666666666,
                                                                    "children": [
                                                                        {
                                                                            "name": "Be3 2/3",
                                                                            "parent": "e6 2/3",
                                                                            "ngames": 3,
                                                                            "ratio": 0.6666666666666666,
                                                                            "children": [
                                                                                {
                                                                                    "name": "c5 1/2",
                                                                                    "parent": "Be3 2/3",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.5,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "Be2 0/1",
                                                                                            "parent": "c5 1/2",
                                                                                            "ngames": 1,
                                                                                            "ratio": 0.0,
                                                                                            "url": "https://lichess.org/3FuXBf3W"
                                                                                        },
                                                                                        {
                                                                                            "name": "dxc5 1/1",
                                                                                            "parent": "c5 1/2",
                                                                                            "ngames": 1,
                                                                                            "ratio": 1.0,
                                                                                            "url": "https://lichess.org/Q1MNJc7n"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "h6 1/1",
                                                                                    "parent": "Be3 2/3",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/Ixqcg3ZY"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "e5 12/14",
                    "parent": "e4 32.5/52",
                    "ngames": 14,
                    "ratio": 0.8571428571428571,
                    "children": [
                        {
                            "name": "Nf3 12/14",
                            "parent": "e5 12/14",
                            "ngames": 14,
                            "ratio": 0.8571428571428571,
                            "children": [
                                {
                                    "name": "Nc6 11/13",
                                    "parent": "Nf3 12/14",
                                    "ngames": 13,
                                    "ratio": 0.8461538461538461,
                                    "children": [
                                        {
                                            "name": "d4 1/1",
                                            "parent": "Nc6 11/13",
                                            "ngames": 1,
                                            "ratio": 1.0,
                                            "url": "https://lichess.org/R2QwuiLO"
                                        },
                                        {
                                            "name": "Bb5 10/12",
                                            "parent": "Nc6 11/13",
                                            "ngames": 12,
                                            "ratio": 0.8333333333333334,
                                            "children": [
                                                {
                                                    "name": "d6 1/1",
                                                    "parent": "Bb5 10/12",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/eoxU0tsG"
                                                },
                                                {
                                                    "name": "Bc5 1/1",
                                                    "parent": "Bb5 10/12",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/Ee8oZlwp"
                                                },
                                                {
                                                    "name": "Nf6 3/3",
                                                    "parent": "Bb5 10/12",
                                                    "ngames": 3,
                                                    "ratio": 1.0,
                                                    "children": [
                                                        {
                                                            "name": "O-O 3/3",
                                                            "parent": "Nf6 3/3",
                                                            "ngames": 3,
                                                            "ratio": 1.0,
                                                            "children": [
                                                                {
                                                                    "name": "Nxe4 2/2",
                                                                    "parent": "O-O 3/3",
                                                                    "ngames": 2,
                                                                    "ratio": 1.0,
                                                                    "children": [
                                                                        {
                                                                            "name": "Re1 2/2",
                                                                            "parent": "Nxe4 2/2",
                                                                            "ngames": 2,
                                                                            "ratio": 1.0,
                                                                            "children": [
                                                                                {
                                                                                    "name": "Nd6 1/1",
                                                                                    "parent": "Re1 2/2",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/6MEDEPH5"
                                                                                },
                                                                                {
                                                                                    "name": "d5 1/1",
                                                                                    "parent": "Re1 2/2",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/74mTqo0u"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "Bc5 1/1",
                                                                    "parent": "O-O 3/3",
                                                                    "ngames": 1,
                                                                    "ratio": 1.0,
                                                                    "url": "https://lichess.org/M8bh3ufS"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "a6 4/6",
                                                    "parent": "Bb5 10/12",
                                                    "ngames": 6,
                                                    "ratio": 0.6666666666666666,
                                                    "children": [
                                                        {
                                                            "name": "Ba4 4/6",
                                                            "parent": "a6 4/6",
                                                            "ngames": 6,
                                                            "ratio": 0.6666666666666666,
                                                            "children": [
                                                                {
                                                                    "name": "Nf6 2/3",
                                                                    "parent": "Ba4 4/6",
                                                                    "ngames": 3,
                                                                    "ratio": 0.6666666666666666,
                                                                    "children": [
                                                                        {
                                                                            "name": "O-O 2/3",
                                                                            "parent": "Nf6 2/3",
                                                                            "ngames": 3,
                                                                            "ratio": 0.6666666666666666,
                                                                            "children": [
                                                                                {
                                                                                    "name": "Be7 1/2",
                                                                                    "parent": "O-O 2/3",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.5,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "Re1 1/2",
                                                                                            "parent": "Be7 1/2",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.5,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "b5 1/1",
                                                                                    "parent": "O-O 2/3",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/IRPKaFBA"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "d6 2/2",
                                                                    "parent": "Ba4 4/6",
                                                                    "ngames": 2,
                                                                    "ratio": 1.0,
                                                                    "children": [
                                                                        {
                                                                            "name": "O-O 2/2",
                                                                            "parent": "d6 2/2",
                                                                            "ngames": 2,
                                                                            "ratio": 1.0,
                                                                            "children": [
                                                                                {
                                                                                    "name": "Nf6 1/1",
                                                                                    "parent": "O-O 2/2",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/obEUuOkK"
                                                                                },
                                                                                {
                                                                                    "name": "Bg4 1/1",
                                                                                    "parent": "O-O 2/2",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/6blNXeqX"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "f5 0/1",
                                                                    "parent": "Ba4 4/6",
                                                                    "ngames": 1,
                                                                    "ratio": 0.0,
                                                                    "url": "https://lichess.org/38n57kOB"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "Nge7 1/1",
                                                    "parent": "Bb5 10/12",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/ONW4BaU4"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "d6 1/1",
                                    "parent": "Nf3 12/14",
                                    "ngames": 1,
                                    "ratio": 1.0,
                                    "url": "https://lichess.org/ycgTPeXk"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "c5 8.5/18",
                    "parent": "e4 32.5/52",
                    "ngames": 18,
                    "ratio": 0.4722222222222222,
                    "children": [
                        {
                            "name": "Nf3 8.5/18",
                            "parent": "c5 8.5/18",
                            "ngames": 18,
                            "ratio": 0.4722222222222222,
                            "children": [
                                {
                                    "name": "d6 2/3",
                                    "parent": "Nf3 8.5/18",
                                    "ngames": 3,
                                    "ratio": 0.6666666666666666,
                                    "children": [
                                        {
                                            "name": "d4 2/3",
                                            "parent": "d6 2/3",
                                            "ngames": 3,
                                            "ratio": 0.6666666666666666,
                                            "children": [
                                                {
                                                    "name": "cxd4 2/3",
                                                    "parent": "d4 2/3",
                                                    "ngames": 3,
                                                    "ratio": 0.6666666666666666,
                                                    "children": [
                                                        {
                                                            "name": "Nxd4 2/3",
                                                            "parent": "cxd4 2/3",
                                                            "ngames": 3,
                                                            "ratio": 0.6666666666666666,
                                                            "children": [
                                                                {
                                                                    "name": "Nf6 2/3",
                                                                    "parent": "Nxd4 2/3",
                                                                    "ngames": 3,
                                                                    "ratio": 0.6666666666666666,
                                                                    "children": [
                                                                        {
                                                                            "name": "Nc3 2/3",
                                                                            "parent": "Nf6 2/3",
                                                                            "ngames": 3,
                                                                            "ratio": 0.6666666666666666,
                                                                            "children": [
                                                                                {
                                                                                    "name": "g6 1/1",
                                                                                    "parent": "Nc3 2/3",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/fDopmtk9"
                                                                                },
                                                                                {
                                                                                    "name": "a6 1/2",
                                                                                    "parent": "Nc3 2/3",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.5,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "Be3 1/2",
                                                                                            "parent": "a6 1/2",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.5,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "e6 1/2",
                                    "parent": "Nf3 8.5/18",
                                    "ngames": 2,
                                    "ratio": 0.5,
                                    "children": [
                                        {
                                            "name": "d4 1/2",
                                            "parent": "e6 1/2",
                                            "ngames": 2,
                                            "ratio": 0.5,
                                            "children": [
                                                {
                                                    "name": "cxd4 1/2",
                                                    "parent": "d4 1/2",
                                                    "ngames": 2,
                                                    "ratio": 0.5,
                                                    "children": [
                                                        {
                                                            "name": "Nxd4 1/2",
                                                            "parent": "cxd4 1/2",
                                                            "ngames": 2,
                                                            "ratio": 0.5,
                                                            "children": [
                                                                {
                                                                    "name": "Nf6 1/1",
                                                                    "parent": "Nxd4 1/2",
                                                                    "ngames": 1,
                                                                    "ratio": 1.0,
                                                                    "url": "https://lichess.org/qqaNae6Z"
                                                                },
                                                                {
                                                                    "name": "a6 0/1",
                                                                    "parent": "Nxd4 1/2",
                                                                    "ngames": 1,
                                                                    "ratio": 0.0,
                                                                    "url": "https://lichess.org/lQZCofaM"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "Nc6 2.0/7",
                                    "parent": "Nf3 8.5/18",
                                    "ngames": 7,
                                    "ratio": 0.2857142857142857,
                                    "children": [
                                        {
                                            "name": "d4 2.0/7",
                                            "parent": "Nc6 2.0/7",
                                            "ngames": 7,
                                            "ratio": 0.2857142857142857,
                                            "children": [
                                                {
                                                    "name": "cxd4 2.0/7",
                                                    "parent": "d4 2.0/7",
                                                    "ngames": 7,
                                                    "ratio": 0.2857142857142857,
                                                    "children": [
                                                        {
                                                            "name": "Nxd4 2.0/7",
                                                            "parent": "cxd4 2.0/7",
                                                            "ngames": 7,
                                                            "ratio": 0.2857142857142857,
                                                            "children": [
                                                                {
                                                                    "name": "Nf6 0.5/1",
                                                                    "parent": "Nxd4 2.0/7",
                                                                    "ngames": 1,
                                                                    "ratio": 0.5,
                                                                    "url": "https://lichess.org/xQvFsrcX"
                                                                },
                                                                {
                                                                    "name": "g6 0.5/1",
                                                                    "parent": "Nxd4 2.0/7",
                                                                    "ngames": 1,
                                                                    "ratio": 0.5,
                                                                    "url": "https://lichess.org/WTeC7Ci5"
                                                                },
                                                                {
                                                                    "name": "d6 0/1",
                                                                    "parent": "Nxd4 2.0/7",
                                                                    "ngames": 1,
                                                                    "ratio": 0.0,
                                                                    "url": "https://lichess.org/hBrSSHAd"
                                                                },
                                                                {
                                                                    "name": "e5 1/4",
                                                                    "parent": "Nxd4 2.0/7",
                                                                    "ngames": 4,
                                                                    "ratio": 0.25,
                                                                    "children": [
                                                                        {
                                                                            "name": "Nb5 1/4",
                                                                            "parent": "e5 1/4",
                                                                            "ngames": 4,
                                                                            "ratio": 0.25,
                                                                            "children": [
                                                                                {
                                                                                    "name": "d6 1/2",
                                                                                    "parent": "Nb5 1/4",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.5,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "N1c3 1/2",
                                                                                            "parent": "d6 1/2",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.5,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "a6 0/2",
                                                                                    "parent": "Nb5 1/4",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.0,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "Nd6+ 0/2",
                                                                                            "parent": "a6 0/2",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.0,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "g6 3.5/6",
                                    "parent": "Nf3 8.5/18",
                                    "ngames": 6,
                                    "ratio": 0.5833333333333334,
                                    "children": [
                                        {
                                            "name": "d4 3.5/6",
                                            "parent": "g6 3.5/6",
                                            "ngames": 6,
                                            "ratio": 0.5833333333333334,
                                            "children": [
                                                {
                                                    "name": "cxd4 3.5/6",
                                                    "parent": "d4 3.5/6",
                                                    "ngames": 6,
                                                    "ratio": 0.5833333333333334,
                                                    "children": [
                                                        {
                                                            "name": "Nxd4 3.5/6",
                                                            "parent": "cxd4 3.5/6",
                                                            "ngames": 6,
                                                            "ratio": 0.5833333333333334,
                                                            "children": [
                                                                {
                                                                    "name": "Nc6 0.5/2",
                                                                    "parent": "Nxd4 3.5/6",
                                                                    "ngames": 2,
                                                                    "ratio": 0.25,
                                                                    "children": [
                                                                        {
                                                                            "name": "c4 0/1",
                                                                            "parent": "Nc6 0.5/2",
                                                                            "ngames": 1,
                                                                            "ratio": 0.0,
                                                                            "url": "https://lichess.org/bJb0OE3p"
                                                                        },
                                                                        {
                                                                            "name": "Be3 0.5/1",
                                                                            "parent": "Nc6 0.5/2",
                                                                            "ngames": 1,
                                                                            "ratio": 0.5,
                                                                            "url": "https://lichess.org/dRkuIiFR"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "Bg7 3/4",
                                                                    "parent": "Nxd4 3.5/6",
                                                                    "ngames": 4,
                                                                    "ratio": 0.75,
                                                                    "children": [
                                                                        {
                                                                            "name": "Be3 3/4",
                                                                            "parent": "Bg7 3/4",
                                                                            "ngames": 4,
                                                                            "ratio": 0.75,
                                                                            "children": [
                                                                                {
                                                                                    "name": "Nf6 2/3",
                                                                                    "parent": "Be3 3/4",
                                                                                    "ngames": 3,
                                                                                    "ratio": 0.6666666666666666,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "Bd3 1/2",
                                                                                            "parent": "Nf6 2/3",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.5,
                                                                                            "children": []
                                                                                        },
                                                                                        {
                                                                                            "name": "e5 1/1",
                                                                                            "parent": "Nf6 2/3",
                                                                                            "ngames": 1,
                                                                                            "ratio": 1.0,
                                                                                            "url": "https://lichess.org/c6MnmJp2"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "Nc6 1/1",
                                                                                    "parent": "Be3 3/4",
                                                                                    "ngames": 1,
                                                                                    "ratio": 1.0,
                                                                                    "url": "https://lichess.org/K4I16Qjx"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "e6 8/10",
                    "parent": "e4 32.5/52",
                    "ngames": 10,
                    "ratio": 0.8,
                    "children": [
                        {
                            "name": "d4 8/10",
                            "parent": "e6 8/10",
                            "ngames": 10,
                            "ratio": 0.8,
                            "children": [
                                {
                                    "name": "d5 8/10",
                                    "parent": "d4 8/10",
                                    "ngames": 10,
                                    "ratio": 0.8,
                                    "children": [
                                        {
                                            "name": "Nc3 8/10",
                                            "parent": "d5 8/10",
                                            "ngames": 10,
                                            "ratio": 0.8,
                                            "children": [
                                                {
                                                    "name": "Nf6 2/3",
                                                    "parent": "Nc3 8/10",
                                                    "ngames": 3,
                                                    "ratio": 0.6666666666666666,
                                                    "children": [
                                                        {
                                                            "name": "e5 2/3",
                                                            "parent": "Nf6 2/3",
                                                            "ngames": 3,
                                                            "ratio": 0.6666666666666666,
                                                            "children": [
                                                                {
                                                                    "name": "Nfd7 1/2",
                                                                    "parent": "e5 2/3",
                                                                    "ngames": 2,
                                                                    "ratio": 0.5,
                                                                    "children": [
                                                                        {
                                                                            "name": "Nce2 1/2",
                                                                            "parent": "Nfd7 1/2",
                                                                            "ngames": 2,
                                                                            "ratio": 0.5,
                                                                            "children": [
                                                                                {
                                                                                    "name": "c5 1/2",
                                                                                    "parent": "Nce2 1/2",
                                                                                    "ngames": 2,
                                                                                    "ratio": 0.5,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "c3 1/2",
                                                                                            "parent": "c5 1/2",
                                                                                            "ngames": 2,
                                                                                            "ratio": 0.5,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "Ne4 1/1",
                                                                    "parent": "e5 2/3",
                                                                    "ngames": 1,
                                                                    "ratio": 1.0,
                                                                    "url": "https://lichess.org/gkPlysJD"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "c6 1/1",
                                                    "parent": "Nc3 8/10",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/w5CcAYr6"
                                                },
                                                {
                                                    "name": "Bb4 4/5",
                                                    "parent": "Nc3 8/10",
                                                    "ngames": 5,
                                                    "ratio": 0.8,
                                                    "children": [
                                                        {
                                                            "name": "e5 4/5",
                                                            "parent": "Bb4 4/5",
                                                            "ngames": 5,
                                                            "ratio": 0.8,
                                                            "children": [
                                                                {
                                                                    "name": "c5 4/4",
                                                                    "parent": "e5 4/5",
                                                                    "ngames": 4,
                                                                    "ratio": 1.0,
                                                                    "children": [
                                                                        {
                                                                            "name": "a3 4/4",
                                                                            "parent": "c5 4/4",
                                                                            "ngames": 4,
                                                                            "ratio": 1.0,
                                                                            "children": [
                                                                                {
                                                                                    "name": "Bxc3+ 4/4",
                                                                                    "parent": "a3 4/4",
                                                                                    "ngames": 4,
                                                                                    "ratio": 1.0,
                                                                                    "children": [
                                                                                        {
                                                                                            "name": "bxc3 4/4",
                                                                                            "parent": "Bxc3+ 4/4",
                                                                                            "ngames": 4,
                                                                                            "ratio": 1.0,
                                                                                            "children": []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "Ne7 0/1",
                                                                    "parent": "e5 4/5",
                                                                    "ngames": 1,
                                                                    "ratio": 0.0,
                                                                    "url": "https://lichess.org/Yq6Tljbs"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "f5 1/1",
                                                    "parent": "Nc3 8/10",
                                                    "ngames": 1,
                                                    "ratio": 1.0,
                                                    "url": "https://lichess.org/GswYnwHV"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "d6 0/1",
                    "parent": "e4 32.5/52",
                    "ngames": 1,
                    "ratio": 0.0,
                    "url": "https://lichess.org/MGDmF8d6"
                },
                {
                    "name": "Nf6 1/1",
                    "parent": "e4 32.5/52",
                    "ngames": 1,
                    "ratio": 1.0,
                    "url": "https://lichess.org/mk49xBYU"
                },
                {
                    "name": "g6 0/1",
                    "parent": "e4 32.5/52",
                    "ngames": 1,
                    "ratio": 0.0,
                    "url": "https://lichess.org/wewitxJy"
                }
            ]
        }
    ]
}
];


// ************** Generate the tree diagram	 *****************
var margin = {top: 20, right: 120, bottom: 20, left: 120},
	width = 1500 - margin.right - margin.left,
	height = 500 - margin.top - margin.bottom;
	
var i = 0,
	duration = 750,
	root;

var tree = d3.layout.tree()
	.size([height, width]);

var diagonal = d3.svg.diagonal()
	.projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
	.attr("width", width + margin.right + margin.left)
	.attr("height", height + margin.top + margin.bottom)
  .append("g")
	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

root = treeData[0];
root.x0 = height / 2;
root.y0 = 0;
  
update(root);

d3.select(self.frameElement).style("height", "500px");

function update(source) {

  // Compute the new tree layout.
  var nodes = tree.nodes(root).reverse(),
	  links = tree.links(nodes);

  // Normalize for fixed-depth.
  nodes.forEach(function(d) { d.y = d.depth * 180; });

  // Update the nodes…
  var node = svg.selectAll("g.node")
	  .data(nodes, function(d) { return d.id || (d.id = ++i); });

  // Enter any new nodes at the parent's previous position.
  var nodeEnter = node.enter().append("g")
	  .attr("class", "node")
	  .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
	  .on("click", click);

  nodeEnter.append("circle")
	  .attr("r", 1e-6)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeEnter.append("text")
	  .attr("x", function(d) { return d.children || d._children ? -13 : 13; })
	  .attr("dy", ".35em")
	  .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
	  .text(function(d) { return d.name; })
	  .style("fill-opacity", 1e-6);

  // Transition nodes to their new position.
  var nodeUpdate = node.transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  nodeUpdate.select("circle")
	  .attr("r", 10)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeUpdate.select("text")
	  .style("fill-opacity", 1);

  // Transition exiting nodes to the parent's new position.
  var nodeExit = node.exit().transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
	  .remove();

  nodeExit.select("circle")
	  .attr("r", 1e-6);

  nodeExit.select("text")
	  .style("fill-opacity", 1e-6);

  // Update the links…
  var link = svg.selectAll("path.link")
	  .data(links, function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("path", "g")
	  .attr("class", "link")
	  .style("stroke-width", function(d) { 
            if (d.source.ngames >= 0) {
                var ratio = d.target.ngames/d.source.ngames;
                var width = Math.ceil(ratio*100/10);
                return `${width}px`;
            }
            
            return "2px";
        })
	  .attr("d", function(d) {
		var o = {x: source.x0, y: source.y0};
		return diagonal({source: o, target: o});
	  });

  // Transition links to their new position.
  link.transition()
	  .duration(duration)
	  .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
	  .duration(duration)
	  .attr("d", function(d) {
		var o = {x: source.x, y: source.y};
		return diagonal({source: o, target: o});
	  })
	  .remove();

  // Stash the old positions for transition.
  nodes.forEach(function(d) {
	d.x0 = d.x;
	d.y0 = d.y;
  });
}

// Toggle children on click.
function click(d) {
  if (d.url) {
	  window.open(d.url, '_blank').focus();
	  return;
  }
  if (d.children) {
	d._children = d.children;
	d.children = null;
  } else {
	d.children = d._children;
	d._children = null;
  }
  update(d);
}

</script>
	
  </body>
</html>
